<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Chat App</title>
</head>
<body>
    <div id="chat">
        <ul id="messages"></ul>
        <input id="message" autocomplete="off" /><button onclick="sendMessage()">Send</button>
    </div>
    
    <script>
        var socket = new WebSocket('ws://your-server-url/your-websocket-endpoint');
        var myUsername = "User1"; // 자신의 사용자 이름을 설정

        socket.onopen = function(event) {
            console.log('WebSocket connection opened.');
        };

        socket.onmessage = function(event) {
            var message = JSON.parse(event.data);
            displayMessage(message.sender + ': ' + message.content, message.sender === myUsername);
        };

        socket.onerror = function(event) {
            console.error('WebSocket error: ' + event);
        };

        socket.onclose = function(event) {
            if (event.wasClean) {
                console.log('WebSocket connection closed cleanly, code=' + event.code + ', reason=' + event.reason);
            } else {
                console.error('WebSocket connection closed unexpectedly');
            }
        };

        function sendMessage() {
            var messageInput = document.getElementById('message');
            var message = messageInput.value.trim();
            
            if (message) {
                socket.send(JSON.stringify({ content: message, sender: myUsername }));
                displayMessage(myUsername + ': ' + message, true); // 자신이 보낸 메시지를 바로 표시
                messageInput.value = '';
            }
        }

        function displayMessage(message, isMine) {
            var messages = document.getElementById('messages');
            var li = document.createElement('li');
            li.appendChild(document.createTextNode(message));

            // 자신이 보낸 메시지인 경우 스타일을 변경
            if (isMine) {
                li.style.fontWeight = "bold";
                li.style.color = "blue";
            }

            messages.appendChild(li);
        }
    </script>
</body>
</html>